# ESPArduinoBalanceBot

Arduino平衡車

# 1. 概覽

## 專案進度原則

1. 撰寫時請保持專案進度表的更新 並紀錄在最下方文檔的變更
2. 

## 規劃進度

[x] 撰寫config.h 設定腳位等基本資訊
[x] 測試I2C模組,地址等資訊
[x] 測試I2C OLED模組
[ ] I2C MPU6050模組 測試
[ ] I2C MPU6050模組 靜態校正 與 自動校正
[ ] I2C MPU6050 測試小車傾角的穩定性(alpha 時間常數設定)
[ ] I2C OLED整合 MPU6050 顯示 
[ ] 測試馬達模組 並定義運動方向等
[ ] 撰寫平衡環
[ ] 撰寫速度環

# 2. 具體進度

## 2.1 撰寫config.h

- 已完成所有腳位的設定，包括：
  - I2C 介面腳位 (SDA, SCL)
  - 馬達1控制腳位 (PWM, AIN1, AIN2, ENA, ENB)
  - 馬達2控制腳位 (PWM, AIN1, AIN2, ENA, ENB)
  - 馬達共用控制腳位 (STBY)
  - MPU (慣性測量單元) 腳位
  - WS2812 燈珠腳位

## 2.2 測試I2C模組

- 已建立I2C掃描程式，用於檢測I2C設備的地址
- 目前OLED和MPU6050的具體地址尚未確認，將通過掃描程式確定
- 已確認OLED使用的I2C地址為0x3C
- 掃描程式會在Serial監視器上顯示所有連接的I2C設備地址
- 常見的OLED地址：0x3C, 0x3D, 0x78, 0x7A
- 常見的MPU6050地址：0x68, 0x69

## 2.3 OLED顯示器測試

- 已建立OLED測試程式 `oled_sh1106_test.cpp`，用於測試SH1106型號的OLED顯示器
- 使用U8g2庫實現與SH1106控制器的正確通訊
- 解決了控制器型號混用導致的「花屏」問題（SH1106 vs SSD1306）
- 測試程式包含多種顯示功能：
  - 顯示文字
  - 繪製幾何圖形（方框、圓形）
  - 顯示自定義圖標
  - 不同字體大小的文字顯示
  - 繪製線條和點陣圖案
- 在platformio.ini中新增專用的編譯環境 `oled_sh1106_test`
- 問題解決方案已記錄在 `troubleshooting.md` 中，確保使用正確的控制器驅動

# 3. 文檔變更記錄

- 2025-03-13: 完成config.h腳位設定，建立I2C掃描程式
- 2025-03-15: 完成OLED顯示器測試程式，解決SH1106控制器的顯示問題
